<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        div {
            width: 100px;
            height: 100px;
            background-color: #ff0000;
        }
    </style>
</head>

<body>
    <div class="color-opacity">
        十六进制转rgba带透明再转回十六进制颜色值
    </div>
    <script>
        let colorItem=document.querySelector('.color-opacity');
        
        const adjustColorOpacity = function (color, opacity) {
            // 移除 # 号（如果有）
            color = color.replace("#", "");

            // 将十六进制颜色值转换为 RGB 值
            let r = parseInt(color.substring(0, 2), 16);
            let g = parseInt(color.substring(2, 4), 16);
            let b = parseInt(color.substring(4, 6), 16);

            // 将透明度转换为 0 到 1 之间的值
            opacity = opacity / 100;

            // 计算插值后的颜色值
            let interpolatedR = Math.round((1 - opacity) * 255 + opacity * r);
            let interpolatedG = Math.round((1 - opacity) * 255 + opacity * g);
            let interpolatedB = Math.round((1 - opacity) * 255 + opacity * b);

            // 将插值后的 RGB 值转换回十六进制颜色值
            let result = "#" + (interpolatedR < 16 ? "0" : "") + interpolatedR.toString(16);
            result += (interpolatedG < 16 ? "0" : "") + interpolatedG.toString(16);
            result += (interpolatedB < 16 ? "0" : "") + interpolatedB.toString(16);

            return result;
        }
        console.log(adjustColorOpacity('#ff0000', 50))
        colorItem.style.backgroundColor=adjustColorOpacity('#ff0000', 50)
        colorItem.style.color=adjustColorOpacity('#ff0000', 100)
    </script>
</body>

</html>